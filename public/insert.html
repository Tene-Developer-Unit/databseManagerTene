<html dir="rtl" lang="he">
<head>
  <meta charset="UTF-8">
    
    <script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>
	<script src="https://cdn.ckeditor.com/4.8.0/standard/ckeditor.js"></script>
    <title>הוספת משרות - מקצוע לחיים</title>
    <style>
        table, th, td 
        {
            margin:10px 0;
            border:solid 1px #333;
            padding:2px 4px;
            font:15px Verdana;
        }
        th {
            font-weight:bold;
        }
    </style>
</head>
<body>
בחר חברה מהרשימה:
<select id="list">
</select>
<br /><br />
<input type="text" placeholder="הזן שם משרה" id="jobName">
<br /><br />
<textarea type="text" placeholder="הזן תיאור משרה" id="jobDesc" name="jobDesc"></textarea>
<br /><br />
<button onclick="addJob();">הוסף משרה</button>
<a href="index.html"><button>חזור</button></a>

<script>
CKEDITOR.replace( 'jobDesc' );
var config = {
        apiKey: "AIzaSyCPxWcejZl7Uuho23J5aj3RkuOnAYY8adI",
			authDomain: "teneapp-fe33d.firebaseapp.com",
			databaseURL: "https://teneapp-fe33d.firebaseio.com",
			projectId: "teneapp-fe33d",
			storageBucket: "teneapp-fe33d.appspot.com",
			messagingSenderId: "215621007831"
    };
    firebase.initializeApp(config);
	
	
	usersRef = firebase.database().ref('CompaniesList');
usersRef.orderByValue().on("value", function(snapshot) {
    console.log(snapshot.val());
    snapshot.forEach(function(data) {
		var select = document.getElementById("list");
		select.options[select.options.length] = new Option(data.key);
    });
});


	function addJob(){
	var selected = document.getElementById("list").value;
	var Desc = CKEDITOR.instances['jobDesc'].getData();
	var Name = document.getElementById("jobName").value;
	
	
	if (selected==null || selected=="" || Desc==null || Desc=="" || Name==null || Name=="")
        {
            alert("אנא מלא את כל השדות הדרושים!");
            return false;
        } else {
	
	
    firebase.database().ref('/Jobs/').child(selected + '/' ).push({
    jobDesc: Desc,
    jobName: Name,
  });
  alert('המשרה נוספה בהצלחה!');
}
  }
  
</script>
</body>
</html>	